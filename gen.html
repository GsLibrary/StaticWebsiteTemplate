<html>

<head>
  <title>Download Latest Version</title>
</head>

<body>
  <script>
    // This URL should point to your repository's API endpoint for the latest commit of a specific folder
    const apiURL = 'https://api.github.com/repos/GsLibrary/StaticWebsiteTemplate/commits?path=/Latest%20Version';

    function fetchLatestCommitDate() {
      // Fetch the latest commit data from GitHub
      fetch(apiURL)
        .then(response => response.json())
        .then(commits => {
          if (commits.length > 0) {
            // Get the date of the latest commit
            const latestCommitDate = new Date(commits[0].commit.committer.date);
            // Format the date as needed, e.g., YYYY-MM-DD
            const formattedDate = latestCommitDate.toISOString().split('T')[0];
            // Continue with setting the URL
            generateAndSetUrl(formattedDate);
          } else {
            console.error('No commits found.');
          }
        }).catch(error => {
          console.error('Error fetching commit data:', error);
        });
    }

    function generateAndSetUrl(commitDate) {
      // Ensure that the commitDate is URL-encoded
      const encodedCommitDate = encodeURIComponent(commitDate);
      const sequence = Math.round(Math.random() * 12345678);
      const initName = `StaticWebTemp - ${encodedCommitDate} - `;
      const fullName = encodeURIComponent(initName + sequence);

      const initUrl = "https://minhaskamal.github.io/DownGit/#/home?url=https:%2F%2Fgithub.com%2FGsLibrary%2FStaticWebsiteTemplate%2Ftree%2Fmain%2FLatest%20Version";
      const param = "&fileName=";
      const url = initUrl + param + fullName;
      sendUser(url);
    }

    function sendUser(url) {
      // Perform the redirection
      window.location.href = url;
    }

    // Initiate the commit date fetch and URL generation process
    fetchLatestCommitDate();
  </script>
</body>

</html>